<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport"
          content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Use the title from a page's frontmatter if it has one -->
    <title>AWS emissions</title>
    <link rel="stylesheet" href="/talks/stylesheets/site.css">
    <script src="/talks/javascripts/site.js"></script>
    <link href="/stylesheets/site.css" rel="stylesheet" />
    <script src="/javascripts/site.js"></script>
  </head>
  <body>
    <script src="/talks/javascripts/aws-emissions.js"></script>
<script src="/javascripts/aws-emissions.js"></script>
<link href="/stylesheets/aws-emissions.css" rel="stylesheet" />
<div class="talk">
  <h1>Calculating CO<sub>2</sub>e emissions from cloud hosting on AWS</h1>
  <h2>Merrin Macleod • February 2019</h2>
  <section>
    <p>This article is a follow-up to my <a href="https://www.youtube.com">RubyConf AU talk, Environment Variables</a>, in which I discussed how software developers affect climate change.</p>
    <p>It's hard to estimate the carbon dioxide equivalent (CO<sub>2</sub>e) emissions caused by cloud servers, but it is a significant part of the carbon footprint for many tech companies.</p>
    <p>AWS, and other cloud infrastructure providers, claim that moving to their servers will lead to a reduction in carbon emissions. This isn't always true.</p>
    <p>For example, many New Zealand organisations are moving to AWS from managing their own datacentres or using NZ-based co-located datacentres. They will usually move to the closest region, which is in Sydney. Australia's electricity is about six times more carbon intensive than New Zealand's, so even if they reduce their computer usage and the efficiency of the datacentre is much better, it's likely that they are increasing their carbon emissions.</p>
    <p>A t2.large EC2 instance in Sydney results in emissions of between 1 tonne (optimistic assumptions) and 2.4 tonnes (pessimistic assumptions) of CO<sub>2</sub>e a year, according to my calculations.</p>
    <p>AWS does not release these numbers, so this is based off public information and the assumptions below. If you're from AWS and you're mad about these assumptions being wrong, please do release better numbers and <a href="https://www.twitter.com/merxplat">get in touch</a>!</p>
  </section>
  <section>
    <h3>Methodology</h3>
    <p>In order to estimate carbon emissions from a cloud hosting product, we need the following factors:</p>
    <ol>
      <li>The power draw of a computer</li>
      <li>The percentage of a computer that you are using</li>
      <li>The energy efficiency of the data centre</li>
      <li>The carbon intensity of the electricity source</li>
    </ol>
  </section>
  <section>
    <h3>How much electricity does each computer use?</h3>
    <p>There are commercial reasons why cloud companies are unlikely to release these exact numbers. Amazon does have <a href="https://aws.amazon.com/ec2/instance-types/">some details about its hardware</a> available, but not enough to know exactly. They are also moving towards using custom chips, which do not have public electricity usage information available.</p>
    <p>Based on those details and some sneaky chats with people who know these things, my estimate is about 0.83KW for the machines that t2.large instances are built on. You could make an optimistic guess at 600W and a pessimistic guess at 1200W. Specialised machines are likely to differ.</p>
  </section>
  <section>
    <h3>How much of a computer does this product use?</h3>
    <p>This completely depends on the product. You can infer how many EC2 or RDS instances fit into a standard machine based on the products available, but beyond that you might just have to guess based on pricing.</p>
    <p>My assumption is that a t2.large EC2 instance uses 1/4 of the resources of one machine, based on the <a href="https://aws.amazon.com/ec2/instance-types/">hardware listed and instance type options</a>.</p>
  </section>
  <section>
    <h3>How much electricity does the data centre use for things other than computers?</h3>
    <p>The metric for electricity used in a data centre is PUE, or Power Usage Effectiveness. It is the ratio of total energy used to energy used by computers.</p>
    <p>A perfect PUE - where no electricity is used on anything other than computers - would be 1.0. Average data centres tend to have a PUE around about 1.6 or 1.7.</p>
    <p>Hyper-scale data centres run by companies like AWS, Google, and Microsoft boast of much more efficient data centres. Google reports that their data centres have an average PUE of 1.12. Amazon does not report their average PUE, but <a href="https://aws.amazon.com/blogs/aws/cloud-computing-server-utilization-the-environment/">implies that it's lower than 1.2</a>.</p>
    <p>Most of the extra electricity goes towards cooling. PUE tends to be higher in hotter climates, because there is more cooling needed.</p>
    <p>Based on these details, my guess is that the PUE of AWS' Sydney datacentres is about 1.15. You could make an optimistic guess at 1.1 and a pessimistic guess at 1.3.</p>
  </section>
  <section>
    <h3>How much CO<sub>2</sub>e emissions does the electricity cause?</h3>
    <p>Electricity causes different amounts of CO<sub>2</sub>e emissions depending on how it is generated. Coal emits a lot, hydro power emits very little. <a href="https://www.electricitymap.org">electricitymap.org</a> is a fantastic visual representation of real-time electricity emissions in different markets.</p>
    <p>In some regions, AWS makes power purchase agreements to offset its usage of non-renewable electricity. I couldn't find evidence of there being any such agreements in Australia, despite these market mechanisms being available.</p>
    <p>For regions where these are made, it's hard to know whether these power purchases are behind the meter, which would mean that they aren't reflected in the average grid power intensity for the area, or if they are contracts for difference.</p>
    <p>Microsoft (Azure) and Google (GCP) also make power purchase agreements. They also report and offset their CO<sub>2</sub>e emissions, which AWS does not do.</p>
    <p>New South Wales' average emissions intensity is about 700g/kWh, and the Sydney datacentres appear to use grid average electricity with no local PPAs or offsets. AWS <a href="https://aws.amazon.com/about-aws/sustainability/">states</a> that its global average CO<sub>2</sub>e intensity is 393g/kWh, so in the absence of more specific regional data, you may like to use that number.</p>
  </section>
  <section>
    <h2>Calculation</h2>
    <p>The calculation is:</p>
    <p><span>Power draw (kilowatts)</span> × <span>PUE</span> × <span>percent used</span> × <span>energy carbon intensity (g CO<sub>2</sub>e/kWh)</span></p>
    <p>This gives you an estimate of grams of CO<sub>2</sub>e per hour, which can then be extrapolated to longer timeframes.</p>
    <fieldset>
      <label for="js-pue">PUE (Power Usage Effectiveness)</label>
      <input id="js-pue" value="1.2" type="number">
      <div class="calculation__options">
        <span class="js-option calculation__option" data-pue="1.7">Global average</span>
        <span class="js-option calculation__option" data-pue="1.5">Pessimistic</span>
        <span class="js-option calculation__option" data-pue="1.2">Hyperscale average</span>
        <span class="js-option calculation__option" data-pue="1.12">Google average</span>
      </div>
    </fieldset>
    <fieldset>
      <label for="js-energy-intensity">Energy intensity (g CO<sub>2</sub>e/kWh)</label>
      <input id="js-energy-intensity" value="700" type="number">
      <div class="calculation__options">
        <span class="js-option calculation__option" data-energy-intensity="700">Sydney</span>
        <span class="js-option calculation__option" data-energy-intensity="393">AWS average</span>
        <span class="js-option calculation__option" data-energy-intensity="120">Wellington</span>
        <span class="js-option calculation__option" data-energy-intensity="470">MISO (USA)</span>
        <span class="js-option calculation__option" data-energy-intensity="390">PJM (USA)</span>
        <span class="js-option calculation__option" data-energy-intensity="200">New England (USA)</span>
        <span class="js-option calculation__option" data-energy-intensity="150">UK</span>
        <span class="js-option calculation__option" data-energy-intensity="75">France</span>
        <span class="js-option calculation__option" data-energy-intensity="650">Estonia</span>
        <span class="js-option calculation__option" data-energy-intensity="120">Central Brazil</span>
      </div>
    </fieldset>
    <fieldset>
      <label for="js-power-draw">Power draw (kilowatts)</label>
      <input id="js-power-draw" value="0.83" type="number">
      <div class="calculation__options">
        <span class="js-option calculation__option" data-power-draw="1.2">Pessimistic</span>
        <span class="js-option calculation__option" data-power-draw="0.6">Optimistic</span>
      </div>
    </fieldset>
    <fieldset>
      <label for="js-percent-computer">Percent of computer</label>
      <input id="js-percent-computer" value="25" type="number">
      <div class="calculation__options">
        <span class="js-option calculation__option" data-percent-computer="100">1</span>
        <span class="js-option calculation__option" data-percent-computer="50">1/2</span>
        <span class="js-option calculation__option" data-percent-computer="25">1/4</span>
        <span class="js-option calculation__option" data-percent-computer="16.667">1/6</span>
        <span class="js-option calculation__option" data-percent-computer="12.5">1/8</span>
        <span class="js-option calculation__option" data-percent-computer="6.25">1/16</span>
        <span class="js-option calculation__option" data-percent-computer="3.125">1/32</span>
      </div>
    </fieldset>
    <fieldset>
      <label for="js-hourly">Grams of CO<sub>2</sub>e per hour</label>
      <input type="text" name="js-hourly" value="">
    </fieldset>
    <fieldset>
      <label for="js-daily">Grams of CO<sub>2</sub>e per day</label>
      <input type="text" name="js-hourly" value="">
    </fieldset>
    <fieldset>
      <label for="js-yearly">Kilograms of CO<sub>2</sub>e per year</label>
      <input type="text" name="js-yearly" value="">
    </fieldset>
    <fieldset>
      <label for="js-cheese">Cheese equivalent (kilograms annually, based on 10kg CO2e per kg of cheese)</label>
      <input type="text" name="js-cheese" value="">
    </fieldset>
  </section>
  <section>
    <h3>Goals</h3>
    <p>Software development can help the world use resources more effectively, reduce carbon dioxide emissions, and adapt to a low-carbon world. But it can also result in <a href="https://digiconomist.net/bitcoin-energy-consumption">incredible energy usage for minimal benefit</a>.</p>
    <p>Cloud computing and hyperscale datacentres are an important tool in increasing global datacentre capacity without increasing datacentre power usage and carbon emissions at the same rate. But it doesn't always work out positively, as with displacing data centre capacity from New Zealand (~120gCO<sub>2</sub>e/kWh) to Sydney (~700gCO<sub>2</sub>e/kWh).</p>
    <p>My goal with making this available is to encourage organisations to keep track of and report their carbon emissions, including those from use of cloud datacentres. I hope this will increase pressure on cloud infrastructure providers to release their electricity usage and carbon emissions data, and to improve their usage of renewable electricity.</p>
  </section>
  <section>
    <h2>References</h2>
    <ul>
      <li>
        <a href="https://aws.amazon.com/fr/about-aws/sustainability/sustainability-timeline/">AWS sustainability policy</a>
      </li>
      <li>
        <a href="https://aws.amazon.com/ec2/instance-types/">AWS instance types</a>
      </li>
    </ul>
  </section>
</div>

    <link rel="stylesheet" href="/talks/stylesheets/webfonts.css">
  </body>
</html>
